"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _Utils = _interopRequireDefault(require("./Utils"));

var _ShortCode = _interopRequireDefault(require("./ShortCode"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var querystring = require("querystring");

class Message {
  static get ERROR_MESSAGES() {
    return {
      sender: "Invalid from address",
      to: "Invalid to address",
      msg: "Invalid Text Message",
      body: "Invalid Body value in Binary Message",
      udh: "Invalid udh value in Binary Message",
      title: "Invalid title in WAP Push message",
      url: "Invalid url in WAP Push message"
    };
  }

  static get PATH() {
    return "/sms/json";
  }
  /**
   * @param {Credentials} credentials
   *    credentials to be used when interacting with the API.
   * @param {Object} options
   *    Addition SMS options.
   */


  constructor(credentials) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    this.creds = credentials;
    this.options = options;

    var _shortcode = new _ShortCode.default(this.creds, this.options);

    this.shortcodeAlert = _shortcode.shortcodeAlert.bind(_shortcode);
    this.shortcode2FA = _shortcode.shortcode2FA.bind(_shortcode);
    this.shortcodeMarketing = _shortcode.shortcodeMarketing.bind(_shortcode);
  }

  _checkToAndFrom(data, callback) {
    if (!data.from) {
      _Utils.default.sendError(callback, new Error(Message.ERROR_MESSAGES.sender));
    } else if (!data.to) {
      _Utils.default.sendError(callback, new Error(Message.ERROR_MESSAGES.to));
    } else {
      return;
    }
  } // _sendMessageCallback


  _sendMessage(data, callback) {
    this._checkToAndFrom(data, callback);

    this.options.logger.info("sending message from " + data.from + " to " + data.to + " with message " + data.text);
    var creds = {
      api_key: this.creds.apiKey,
      api_secret: this.creds.apiSecret
    };
    var body = Object.assign({}, creds, data);
    this.options.httpClient.request({
      host: this.options.restHost || "rest.nexmo.com",
      path: Message.PATH,
      body: JSON.stringify(body),
      headers: {
        "Content-Type": "application/json"
      }
    }, "POST", (err, apiResponse) => {
      if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {
        _Utils.default.sendError(callback, new Error(apiResponse.messages[0]["error-text"]), apiResponse);
      } else {
        if (callback) callback(err, apiResponse);
      }
    });
  }
  /**
   * TODO: document
   */


  sendSms(sender, recipient, message, opts, callback) {
    if (!message) {
      _Utils.default.sendError(callback, new Error(Message.ERROR_MESSAGES.msg));
    } else {
      if (!callback) {
        callback = opts;
        opts = {};
      }

      opts["from"] = sender;
      opts["to"] = recipient;
      opts["text"] = message;

      this._sendMessage(opts, callback);
    }
  }
  /**
   * TODO: document
   */


  sendBinaryMessage(sender, recipient, body, udh, opts, callback) {
    if (!body) {
      _Utils.default.sendError(callback, new Error(Message.ERROR_MESSAGES.body));
    } else if (!udh) {
      _Utils.default.sendError(callback, new Error(Message.ERROR_MESSAGES.udh));
    } else {
      if (!callback) {
        callback = opts;
        opts = {};
      }

      opts["from"] = sender;
      opts["to"] = recipient;
      opts["type"] = "binary";
      opts["body"] = body;
      opts["udh"] = udh;

      this._sendMessage(opts, callback);
    }
  }
  /**
   * TODO: document
   */


  sendWapPushMessage(sender, recipient, title, url, validity, opts, callback) {
    if (!title) {
      _Utils.default.sendError(callback, new Error(Message.ERROR_MESSAGES.title));
    } else if (!url) {
      _Utils.default.sendError(callback, new Error(Message.ERROR_MESSAGES.url));
    } else {
      if (typeof validity === "function") {
        callback = validity;
        opts = {};
        validity = 86400000;
      }

      if (typeof opts === "function") {
        callback = opts;
        opts = {};
      }

      opts["from"] = sender;
      opts["to"] = recipient;
      opts["type"] = "wappush";
      opts["title"] = title;
      opts["validity"] = validity;
      opts["url"] = url;

      this._sendMessage(opts, callback);
    }
  }

  search(id, callback) {
    if (typeof id == "string") {
      return this.options.rest.get("/search/message", {
        id: id
      }, callback);
    } // Otherwise we expect an array


    return this.options.rest.get("/search/messages", {
      ids: id
    }, callback);
  }

  searchRejections(to, date, callback) {
    return this.options.rest.get("/search/rejections", {
      to,
      date
    }, callback);
  }

}

var _default = Message;
exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJxdWVyeXN0cmluZyIsInJlcXVpcmUiLCJNZXNzYWdlIiwiRVJST1JfTUVTU0FHRVMiLCJzZW5kZXIiLCJ0byIsIm1zZyIsImJvZHkiLCJ1ZGgiLCJ0aXRsZSIsInVybCIsIlBBVEgiLCJjb25zdHJ1Y3RvciIsImNyZWRlbnRpYWxzIiwib3B0aW9ucyIsImNyZWRzIiwiX3Nob3J0Y29kZSIsIlNob3J0Q29kZSIsInNob3J0Y29kZUFsZXJ0IiwiYmluZCIsInNob3J0Y29kZTJGQSIsInNob3J0Y29kZU1hcmtldGluZyIsIl9jaGVja1RvQW5kRnJvbSIsImRhdGEiLCJjYWxsYmFjayIsImZyb20iLCJVdGlscyIsInNlbmRFcnJvciIsIkVycm9yIiwiX3NlbmRNZXNzYWdlIiwibG9nZ2VyIiwiaW5mbyIsInRleHQiLCJhcGlfa2V5IiwiYXBpS2V5IiwiYXBpX3NlY3JldCIsImFwaVNlY3JldCIsIk9iamVjdCIsImFzc2lnbiIsImh0dHBDbGllbnQiLCJyZXF1ZXN0IiwiaG9zdCIsInJlc3RIb3N0IiwicGF0aCIsIkpTT04iLCJzdHJpbmdpZnkiLCJoZWFkZXJzIiwiZXJyIiwiYXBpUmVzcG9uc2UiLCJzdGF0dXMiLCJtZXNzYWdlcyIsInNlbmRTbXMiLCJyZWNpcGllbnQiLCJtZXNzYWdlIiwib3B0cyIsInNlbmRCaW5hcnlNZXNzYWdlIiwic2VuZFdhcFB1c2hNZXNzYWdlIiwidmFsaWRpdHkiLCJzZWFyY2giLCJpZCIsInJlc3QiLCJnZXQiLCJpZHMiLCJzZWFyY2hSZWplY3Rpb25zIiwiZGF0ZSJdLCJzb3VyY2VzIjpbIi4uL3NyYy9NZXNzYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4vVXRpbHNcIjtcblxuaW1wb3J0IFNob3J0Q29kZSBmcm9tIFwiLi9TaG9ydENvZGVcIjtcblxudmFyIHF1ZXJ5c3RyaW5nID0gcmVxdWlyZShcInF1ZXJ5c3RyaW5nXCIpO1xuXG5jbGFzcyBNZXNzYWdlIHtcbiAgc3RhdGljIGdldCBFUlJPUl9NRVNTQUdFUygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2VuZGVyOiBcIkludmFsaWQgZnJvbSBhZGRyZXNzXCIsXG4gICAgICB0bzogXCJJbnZhbGlkIHRvIGFkZHJlc3NcIixcbiAgICAgIG1zZzogXCJJbnZhbGlkIFRleHQgTWVzc2FnZVwiLFxuICAgICAgYm9keTogXCJJbnZhbGlkIEJvZHkgdmFsdWUgaW4gQmluYXJ5IE1lc3NhZ2VcIixcbiAgICAgIHVkaDogXCJJbnZhbGlkIHVkaCB2YWx1ZSBpbiBCaW5hcnkgTWVzc2FnZVwiLFxuICAgICAgdGl0bGU6IFwiSW52YWxpZCB0aXRsZSBpbiBXQVAgUHVzaCBtZXNzYWdlXCIsXG4gICAgICB1cmw6IFwiSW52YWxpZCB1cmwgaW4gV0FQIFB1c2ggbWVzc2FnZVwiLFxuICAgIH07XG4gIH1cblxuICBzdGF0aWMgZ2V0IFBBVEgoKSB7XG4gICAgcmV0dXJuIFwiL3Ntcy9qc29uXCI7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtDcmVkZW50aWFsc30gY3JlZGVudGlhbHNcbiAgICogICAgY3JlZGVudGlhbHMgdG8gYmUgdXNlZCB3aGVuIGludGVyYWN0aW5nIHdpdGggdGhlIEFQSS5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogICAgQWRkaXRpb24gU01TIG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihjcmVkZW50aWFscywgb3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5jcmVkcyA9IGNyZWRlbnRpYWxzO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICB2YXIgX3Nob3J0Y29kZSA9IG5ldyBTaG9ydENvZGUodGhpcy5jcmVkcywgdGhpcy5vcHRpb25zKTtcblxuICAgIHRoaXMuc2hvcnRjb2RlQWxlcnQgPSBfc2hvcnRjb2RlLnNob3J0Y29kZUFsZXJ0LmJpbmQoX3Nob3J0Y29kZSk7XG4gICAgdGhpcy5zaG9ydGNvZGUyRkEgPSBfc2hvcnRjb2RlLnNob3J0Y29kZTJGQS5iaW5kKF9zaG9ydGNvZGUpO1xuICAgIHRoaXMuc2hvcnRjb2RlTWFya2V0aW5nID0gX3Nob3J0Y29kZS5zaG9ydGNvZGVNYXJrZXRpbmcuYmluZChfc2hvcnRjb2RlKTtcbiAgfVxuXG4gIF9jaGVja1RvQW5kRnJvbShkYXRhLCBjYWxsYmFjaykge1xuICAgIGlmICghZGF0YS5mcm9tKSB7XG4gICAgICBVdGlscy5zZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihNZXNzYWdlLkVSUk9SX01FU1NBR0VTLnNlbmRlcikpO1xuICAgIH0gZWxzZSBpZiAoIWRhdGEudG8pIHtcbiAgICAgIFV0aWxzLnNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKE1lc3NhZ2UuRVJST1JfTUVTU0FHRVMudG8pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIC8vIF9zZW5kTWVzc2FnZUNhbGxiYWNrXG5cbiAgX3NlbmRNZXNzYWdlKGRhdGEsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5fY2hlY2tUb0FuZEZyb20oZGF0YSwgY2FsbGJhY2spO1xuXG4gICAgdGhpcy5vcHRpb25zLmxvZ2dlci5pbmZvKFxuICAgICAgXCJzZW5kaW5nIG1lc3NhZ2UgZnJvbSBcIiArXG4gICAgICAgIGRhdGEuZnJvbSArXG4gICAgICAgIFwiIHRvIFwiICtcbiAgICAgICAgZGF0YS50byArXG4gICAgICAgIFwiIHdpdGggbWVzc2FnZSBcIiArXG4gICAgICAgIGRhdGEudGV4dFxuICAgICk7XG5cbiAgICBsZXQgY3JlZHMgPSB7XG4gICAgICBhcGlfa2V5OiB0aGlzLmNyZWRzLmFwaUtleSxcbiAgICAgIGFwaV9zZWNyZXQ6IHRoaXMuY3JlZHMuYXBpU2VjcmV0LFxuICAgIH07XG5cbiAgICBsZXQgYm9keSA9IE9iamVjdC5hc3NpZ24oe30sIGNyZWRzLCBkYXRhKTtcbiAgICB0aGlzLm9wdGlvbnMuaHR0cENsaWVudC5yZXF1ZXN0KFxuICAgICAge1xuICAgICAgICBob3N0OiB0aGlzLm9wdGlvbnMucmVzdEhvc3QgfHwgXCJyZXN0Lm5leG1vLmNvbVwiLFxuICAgICAgICBwYXRoOiBNZXNzYWdlLlBBVEgsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICB9LFxuICAgICAgXCJQT1NUXCIsXG4gICAgICAoZXJyLCBhcGlSZXNwb25zZSkgPT4ge1xuICAgICAgICBpZiAoIWVyciAmJiBhcGlSZXNwb25zZS5zdGF0dXMgJiYgYXBpUmVzcG9uc2UubWVzc2FnZXNbMF0uc3RhdHVzID4gMCkge1xuICAgICAgICAgIFV0aWxzLnNlbmRFcnJvcihcbiAgICAgICAgICAgIGNhbGxiYWNrLFxuICAgICAgICAgICAgbmV3IEVycm9yKGFwaVJlc3BvbnNlLm1lc3NhZ2VzWzBdW1wiZXJyb3ItdGV4dFwiXSksXG4gICAgICAgICAgICBhcGlSZXNwb25zZVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhlcnIsIGFwaVJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVE9ETzogZG9jdW1lbnRcbiAgICovXG4gIHNlbmRTbXMoc2VuZGVyLCByZWNpcGllbnQsIG1lc3NhZ2UsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICBVdGlscy5zZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihNZXNzYWdlLkVSUk9SX01FU1NBR0VTLm1zZykpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrID0gb3B0cztcbiAgICAgICAgb3B0cyA9IHt9O1xuICAgICAgfVxuICAgICAgb3B0c1tcImZyb21cIl0gPSBzZW5kZXI7XG4gICAgICBvcHRzW1widG9cIl0gPSByZWNpcGllbnQ7XG4gICAgICBvcHRzW1widGV4dFwiXSA9IG1lc3NhZ2U7XG4gICAgICB0aGlzLl9zZW5kTWVzc2FnZShvcHRzLCBjYWxsYmFjayk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRPRE86IGRvY3VtZW50XG4gICAqL1xuICBzZW5kQmluYXJ5TWVzc2FnZShzZW5kZXIsIHJlY2lwaWVudCwgYm9keSwgdWRoLCBvcHRzLCBjYWxsYmFjaykge1xuICAgIGlmICghYm9keSkge1xuICAgICAgVXRpbHMuc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoTWVzc2FnZS5FUlJPUl9NRVNTQUdFUy5ib2R5KSk7XG4gICAgfSBlbHNlIGlmICghdWRoKSB7XG4gICAgICBVdGlscy5zZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihNZXNzYWdlLkVSUk9SX01FU1NBR0VTLnVkaCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrID0gb3B0cztcbiAgICAgICAgb3B0cyA9IHt9O1xuICAgICAgfVxuICAgICAgb3B0c1tcImZyb21cIl0gPSBzZW5kZXI7XG4gICAgICBvcHRzW1widG9cIl0gPSByZWNpcGllbnQ7XG4gICAgICBvcHRzW1widHlwZVwiXSA9IFwiYmluYXJ5XCI7XG4gICAgICBvcHRzW1wiYm9keVwiXSA9IGJvZHk7XG4gICAgICBvcHRzW1widWRoXCJdID0gdWRoO1xuICAgICAgdGhpcy5fc2VuZE1lc3NhZ2Uob3B0cywgY2FsbGJhY2spO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUT0RPOiBkb2N1bWVudFxuICAgKi9cbiAgc2VuZFdhcFB1c2hNZXNzYWdlKHNlbmRlciwgcmVjaXBpZW50LCB0aXRsZSwgdXJsLCB2YWxpZGl0eSwgb3B0cywgY2FsbGJhY2spIHtcbiAgICBpZiAoIXRpdGxlKSB7XG4gICAgICBVdGlscy5zZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihNZXNzYWdlLkVSUk9SX01FU1NBR0VTLnRpdGxlKSk7XG4gICAgfSBlbHNlIGlmICghdXJsKSB7XG4gICAgICBVdGlscy5zZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihNZXNzYWdlLkVSUk9SX01FU1NBR0VTLnVybCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIHZhbGlkaXR5ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSB2YWxpZGl0eTtcbiAgICAgICAgb3B0cyA9IHt9O1xuICAgICAgICB2YWxpZGl0eSA9IDg2NDAwMDAwO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBvcHRzID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBvcHRzO1xuICAgICAgICBvcHRzID0ge307XG4gICAgICB9XG4gICAgICBvcHRzW1wiZnJvbVwiXSA9IHNlbmRlcjtcbiAgICAgIG9wdHNbXCJ0b1wiXSA9IHJlY2lwaWVudDtcbiAgICAgIG9wdHNbXCJ0eXBlXCJdID0gXCJ3YXBwdXNoXCI7XG4gICAgICBvcHRzW1widGl0bGVcIl0gPSB0aXRsZTtcbiAgICAgIG9wdHNbXCJ2YWxpZGl0eVwiXSA9IHZhbGlkaXR5O1xuICAgICAgb3B0c1tcInVybFwiXSA9IHVybDtcbiAgICAgIHRoaXMuX3NlbmRNZXNzYWdlKG9wdHMsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH1cblxuICBzZWFyY2goaWQsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBpZCA9PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnJlc3QuZ2V0KFxuICAgICAgICBcIi9zZWFyY2gvbWVzc2FnZVwiLFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IGlkLFxuICAgICAgICB9LFxuICAgICAgICBjYWxsYmFja1xuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBPdGhlcndpc2Ugd2UgZXhwZWN0IGFuIGFycmF5XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5yZXN0LmdldChcbiAgICAgIFwiL3NlYXJjaC9tZXNzYWdlc1wiLFxuICAgICAge1xuICAgICAgICBpZHM6IGlkLFxuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrXG4gICAgKTtcbiAgfVxuXG4gIHNlYXJjaFJlamVjdGlvbnModG8sIGRhdGUsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5yZXN0LmdldChcbiAgICAgIFwiL3NlYXJjaC9yZWplY3Rpb25zXCIsXG4gICAgICB7XG4gICAgICAgIHRvLFxuICAgICAgICBkYXRlLFxuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNZXNzYWdlO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztBQUVBOztBQUVBOzs7O0FBRUEsSUFBSUEsV0FBVyxHQUFHQyxPQUFPLENBQUMsYUFBRCxDQUF6Qjs7QUFFQSxNQUFNQyxPQUFOLENBQWM7RUFDYSxXQUFkQyxjQUFjLEdBQUc7SUFDMUIsT0FBTztNQUNMQyxNQUFNLEVBQUUsc0JBREg7TUFFTEMsRUFBRSxFQUFFLG9CQUZDO01BR0xDLEdBQUcsRUFBRSxzQkFIQTtNQUlMQyxJQUFJLEVBQUUsc0NBSkQ7TUFLTEMsR0FBRyxFQUFFLHFDQUxBO01BTUxDLEtBQUssRUFBRSxtQ0FORjtNQU9MQyxHQUFHLEVBQUU7SUFQQSxDQUFQO0VBU0Q7O0VBRWMsV0FBSkMsSUFBSSxHQUFHO0lBQ2hCLE9BQU8sV0FBUDtFQUNEO0VBRUQ7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7RUFDRUMsV0FBVyxDQUFDQyxXQUFELEVBQTRCO0lBQUEsSUFBZEMsT0FBYyx1RUFBSixFQUFJO0lBQ3JDLEtBQUtDLEtBQUwsR0FBYUYsV0FBYjtJQUNBLEtBQUtDLE9BQUwsR0FBZUEsT0FBZjs7SUFFQSxJQUFJRSxVQUFVLEdBQUcsSUFBSUMsa0JBQUosQ0FBYyxLQUFLRixLQUFuQixFQUEwQixLQUFLRCxPQUEvQixDQUFqQjs7SUFFQSxLQUFLSSxjQUFMLEdBQXNCRixVQUFVLENBQUNFLGNBQVgsQ0FBMEJDLElBQTFCLENBQStCSCxVQUEvQixDQUF0QjtJQUNBLEtBQUtJLFlBQUwsR0FBb0JKLFVBQVUsQ0FBQ0ksWUFBWCxDQUF3QkQsSUFBeEIsQ0FBNkJILFVBQTdCLENBQXBCO0lBQ0EsS0FBS0ssa0JBQUwsR0FBMEJMLFVBQVUsQ0FBQ0ssa0JBQVgsQ0FBOEJGLElBQTlCLENBQW1DSCxVQUFuQyxDQUExQjtFQUNEOztFQUVETSxlQUFlLENBQUNDLElBQUQsRUFBT0MsUUFBUCxFQUFpQjtJQUM5QixJQUFJLENBQUNELElBQUksQ0FBQ0UsSUFBVixFQUFnQjtNQUNkQyxjQUFBLENBQU1DLFNBQU4sQ0FBZ0JILFFBQWhCLEVBQTBCLElBQUlJLEtBQUosQ0FBVTFCLE9BQU8sQ0FBQ0MsY0FBUixDQUF1QkMsTUFBakMsQ0FBMUI7SUFDRCxDQUZELE1BRU8sSUFBSSxDQUFDbUIsSUFBSSxDQUFDbEIsRUFBVixFQUFjO01BQ25CcUIsY0FBQSxDQUFNQyxTQUFOLENBQWdCSCxRQUFoQixFQUEwQixJQUFJSSxLQUFKLENBQVUxQixPQUFPLENBQUNDLGNBQVIsQ0FBdUJFLEVBQWpDLENBQTFCO0lBQ0QsQ0FGTSxNQUVBO01BQ0w7SUFDRDtFQUNGLENBMUNXLENBNENaOzs7RUFFQXdCLFlBQVksQ0FBQ04sSUFBRCxFQUFPQyxRQUFQLEVBQWlCO0lBQzNCLEtBQUtGLGVBQUwsQ0FBcUJDLElBQXJCLEVBQTJCQyxRQUEzQjs7SUFFQSxLQUFLVixPQUFMLENBQWFnQixNQUFiLENBQW9CQyxJQUFwQixDQUNFLDBCQUNFUixJQUFJLENBQUNFLElBRFAsR0FFRSxNQUZGLEdBR0VGLElBQUksQ0FBQ2xCLEVBSFAsR0FJRSxnQkFKRixHQUtFa0IsSUFBSSxDQUFDUyxJQU5UO0lBU0EsSUFBSWpCLEtBQUssR0FBRztNQUNWa0IsT0FBTyxFQUFFLEtBQUtsQixLQUFMLENBQVdtQixNQURWO01BRVZDLFVBQVUsRUFBRSxLQUFLcEIsS0FBTCxDQUFXcUI7SUFGYixDQUFaO0lBS0EsSUFBSTdCLElBQUksR0FBRzhCLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjLEVBQWQsRUFBa0J2QixLQUFsQixFQUF5QlEsSUFBekIsQ0FBWDtJQUNBLEtBQUtULE9BQUwsQ0FBYXlCLFVBQWIsQ0FBd0JDLE9BQXhCLENBQ0U7TUFDRUMsSUFBSSxFQUFFLEtBQUszQixPQUFMLENBQWE0QixRQUFiLElBQXlCLGdCQURqQztNQUVFQyxJQUFJLEVBQUV6QyxPQUFPLENBQUNTLElBRmhCO01BR0VKLElBQUksRUFBRXFDLElBQUksQ0FBQ0MsU0FBTCxDQUFldEMsSUFBZixDQUhSO01BSUV1QyxPQUFPLEVBQUU7UUFBRSxnQkFBZ0I7TUFBbEI7SUFKWCxDQURGLEVBT0UsTUFQRixFQVFFLENBQUNDLEdBQUQsRUFBTUMsV0FBTixLQUFzQjtNQUNwQixJQUFJLENBQUNELEdBQUQsSUFBUUMsV0FBVyxDQUFDQyxNQUFwQixJQUE4QkQsV0FBVyxDQUFDRSxRQUFaLENBQXFCLENBQXJCLEVBQXdCRCxNQUF4QixHQUFpQyxDQUFuRSxFQUFzRTtRQUNwRXZCLGNBQUEsQ0FBTUMsU0FBTixDQUNFSCxRQURGLEVBRUUsSUFBSUksS0FBSixDQUFVb0IsV0FBVyxDQUFDRSxRQUFaLENBQXFCLENBQXJCLEVBQXdCLFlBQXhCLENBQVYsQ0FGRixFQUdFRixXQUhGO01BS0QsQ0FORCxNQU1PO1FBQ0wsSUFBSXhCLFFBQUosRUFBY0EsUUFBUSxDQUFDdUIsR0FBRCxFQUFNQyxXQUFOLENBQVI7TUFDZjtJQUNGLENBbEJIO0VBb0JEO0VBRUQ7QUFDRjtBQUNBOzs7RUFDRUcsT0FBTyxDQUFDL0MsTUFBRCxFQUFTZ0QsU0FBVCxFQUFvQkMsT0FBcEIsRUFBNkJDLElBQTdCLEVBQW1DOUIsUUFBbkMsRUFBNkM7SUFDbEQsSUFBSSxDQUFDNkIsT0FBTCxFQUFjO01BQ1ozQixjQUFBLENBQU1DLFNBQU4sQ0FBZ0JILFFBQWhCLEVBQTBCLElBQUlJLEtBQUosQ0FBVTFCLE9BQU8sQ0FBQ0MsY0FBUixDQUF1QkcsR0FBakMsQ0FBMUI7SUFDRCxDQUZELE1BRU87TUFDTCxJQUFJLENBQUNrQixRQUFMLEVBQWU7UUFDYkEsUUFBUSxHQUFHOEIsSUFBWDtRQUNBQSxJQUFJLEdBQUcsRUFBUDtNQUNEOztNQUNEQSxJQUFJLENBQUMsTUFBRCxDQUFKLEdBQWVsRCxNQUFmO01BQ0FrRCxJQUFJLENBQUMsSUFBRCxDQUFKLEdBQWFGLFNBQWI7TUFDQUUsSUFBSSxDQUFDLE1BQUQsQ0FBSixHQUFlRCxPQUFmOztNQUNBLEtBQUt4QixZQUFMLENBQWtCeUIsSUFBbEIsRUFBd0I5QixRQUF4QjtJQUNEO0VBQ0Y7RUFFRDtBQUNGO0FBQ0E7OztFQUNFK0IsaUJBQWlCLENBQUNuRCxNQUFELEVBQVNnRCxTQUFULEVBQW9CN0MsSUFBcEIsRUFBMEJDLEdBQTFCLEVBQStCOEMsSUFBL0IsRUFBcUM5QixRQUFyQyxFQUErQztJQUM5RCxJQUFJLENBQUNqQixJQUFMLEVBQVc7TUFDVG1CLGNBQUEsQ0FBTUMsU0FBTixDQUFnQkgsUUFBaEIsRUFBMEIsSUFBSUksS0FBSixDQUFVMUIsT0FBTyxDQUFDQyxjQUFSLENBQXVCSSxJQUFqQyxDQUExQjtJQUNELENBRkQsTUFFTyxJQUFJLENBQUNDLEdBQUwsRUFBVTtNQUNma0IsY0FBQSxDQUFNQyxTQUFOLENBQWdCSCxRQUFoQixFQUEwQixJQUFJSSxLQUFKLENBQVUxQixPQUFPLENBQUNDLGNBQVIsQ0FBdUJLLEdBQWpDLENBQTFCO0lBQ0QsQ0FGTSxNQUVBO01BQ0wsSUFBSSxDQUFDZ0IsUUFBTCxFQUFlO1FBQ2JBLFFBQVEsR0FBRzhCLElBQVg7UUFDQUEsSUFBSSxHQUFHLEVBQVA7TUFDRDs7TUFDREEsSUFBSSxDQUFDLE1BQUQsQ0FBSixHQUFlbEQsTUFBZjtNQUNBa0QsSUFBSSxDQUFDLElBQUQsQ0FBSixHQUFhRixTQUFiO01BQ0FFLElBQUksQ0FBQyxNQUFELENBQUosR0FBZSxRQUFmO01BQ0FBLElBQUksQ0FBQyxNQUFELENBQUosR0FBZS9DLElBQWY7TUFDQStDLElBQUksQ0FBQyxLQUFELENBQUosR0FBYzlDLEdBQWQ7O01BQ0EsS0FBS3FCLFlBQUwsQ0FBa0J5QixJQUFsQixFQUF3QjlCLFFBQXhCO0lBQ0Q7RUFDRjtFQUVEO0FBQ0Y7QUFDQTs7O0VBQ0VnQyxrQkFBa0IsQ0FBQ3BELE1BQUQsRUFBU2dELFNBQVQsRUFBb0IzQyxLQUFwQixFQUEyQkMsR0FBM0IsRUFBZ0MrQyxRQUFoQyxFQUEwQ0gsSUFBMUMsRUFBZ0Q5QixRQUFoRCxFQUEwRDtJQUMxRSxJQUFJLENBQUNmLEtBQUwsRUFBWTtNQUNWaUIsY0FBQSxDQUFNQyxTQUFOLENBQWdCSCxRQUFoQixFQUEwQixJQUFJSSxLQUFKLENBQVUxQixPQUFPLENBQUNDLGNBQVIsQ0FBdUJNLEtBQWpDLENBQTFCO0lBQ0QsQ0FGRCxNQUVPLElBQUksQ0FBQ0MsR0FBTCxFQUFVO01BQ2ZnQixjQUFBLENBQU1DLFNBQU4sQ0FBZ0JILFFBQWhCLEVBQTBCLElBQUlJLEtBQUosQ0FBVTFCLE9BQU8sQ0FBQ0MsY0FBUixDQUF1Qk8sR0FBakMsQ0FBMUI7SUFDRCxDQUZNLE1BRUE7TUFDTCxJQUFJLE9BQU8rQyxRQUFQLEtBQW9CLFVBQXhCLEVBQW9DO1FBQ2xDakMsUUFBUSxHQUFHaUMsUUFBWDtRQUNBSCxJQUFJLEdBQUcsRUFBUDtRQUNBRyxRQUFRLEdBQUcsUUFBWDtNQUNEOztNQUNELElBQUksT0FBT0gsSUFBUCxLQUFnQixVQUFwQixFQUFnQztRQUM5QjlCLFFBQVEsR0FBRzhCLElBQVg7UUFDQUEsSUFBSSxHQUFHLEVBQVA7TUFDRDs7TUFDREEsSUFBSSxDQUFDLE1BQUQsQ0FBSixHQUFlbEQsTUFBZjtNQUNBa0QsSUFBSSxDQUFDLElBQUQsQ0FBSixHQUFhRixTQUFiO01BQ0FFLElBQUksQ0FBQyxNQUFELENBQUosR0FBZSxTQUFmO01BQ0FBLElBQUksQ0FBQyxPQUFELENBQUosR0FBZ0I3QyxLQUFoQjtNQUNBNkMsSUFBSSxDQUFDLFVBQUQsQ0FBSixHQUFtQkcsUUFBbkI7TUFDQUgsSUFBSSxDQUFDLEtBQUQsQ0FBSixHQUFjNUMsR0FBZDs7TUFDQSxLQUFLbUIsWUFBTCxDQUFrQnlCLElBQWxCLEVBQXdCOUIsUUFBeEI7SUFDRDtFQUNGOztFQUVEa0MsTUFBTSxDQUFDQyxFQUFELEVBQUtuQyxRQUFMLEVBQWU7SUFDbkIsSUFBSSxPQUFPbUMsRUFBUCxJQUFhLFFBQWpCLEVBQTJCO01BQ3pCLE9BQU8sS0FBSzdDLE9BQUwsQ0FBYThDLElBQWIsQ0FBa0JDLEdBQWxCLENBQ0wsaUJBREssRUFFTDtRQUNFRixFQUFFLEVBQUVBO01BRE4sQ0FGSyxFQUtMbkMsUUFMSyxDQUFQO0lBT0QsQ0FUa0IsQ0FXbkI7OztJQUNBLE9BQU8sS0FBS1YsT0FBTCxDQUFhOEMsSUFBYixDQUFrQkMsR0FBbEIsQ0FDTCxrQkFESyxFQUVMO01BQ0VDLEdBQUcsRUFBRUg7SUFEUCxDQUZLLEVBS0xuQyxRQUxLLENBQVA7RUFPRDs7RUFFRHVDLGdCQUFnQixDQUFDMUQsRUFBRCxFQUFLMkQsSUFBTCxFQUFXeEMsUUFBWCxFQUFxQjtJQUNuQyxPQUFPLEtBQUtWLE9BQUwsQ0FBYThDLElBQWIsQ0FBa0JDLEdBQWxCLENBQ0wsb0JBREssRUFFTDtNQUNFeEQsRUFERjtNQUVFMkQ7SUFGRixDQUZLLEVBTUx4QyxRQU5LLENBQVA7RUFRRDs7QUF4TFc7O2VBMkxDdEIsTyJ9