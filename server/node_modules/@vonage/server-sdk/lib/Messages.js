"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _index = _interopRequireDefault(require("./index"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class Messages {
  static get PATH() {
    return "/v1/messages";
  }

  constructor(credentials, options) {
    this.creds = credentials;
    this.options = options; // Used to facilitate testing of the call to the underlying object

    this._vonage = this.options.nexmoOverride || _index.default;

    this._vonage.initialize(this.creds.apiKey, this.creds.apiSecret, this.options);
  }

  send(message, callback) {
    var useJWT = false;

    if (this.creds.applicationId) {
      useJWT = true;
    }

    return this.options.api.post(Messages.PATH, message, callback, useJWT, {
      "Content-Type": "application/json"
    });
  }

}

var _default = Messages;
exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNZXNzYWdlcyIsIlBBVEgiLCJjb25zdHJ1Y3RvciIsImNyZWRlbnRpYWxzIiwib3B0aW9ucyIsImNyZWRzIiwiX3ZvbmFnZSIsIm5leG1vT3ZlcnJpZGUiLCJ2b25hZ2UiLCJpbml0aWFsaXplIiwiYXBpS2V5IiwiYXBpU2VjcmV0Iiwic2VuZCIsIm1lc3NhZ2UiLCJjYWxsYmFjayIsInVzZUpXVCIsImFwcGxpY2F0aW9uSWQiLCJhcGkiLCJwb3N0Il0sInNvdXJjZXMiOlsiLi4vc3JjL01lc3NhZ2VzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgdm9uYWdlIGZyb20gXCIuL2luZGV4XCI7XG5cbmNsYXNzIE1lc3NhZ2VzIHtcbiAgc3RhdGljIGdldCBQQVRIKCkge1xuICAgIHJldHVybiBcIi92MS9tZXNzYWdlc1wiO1xuICB9XG5cbiAgY29uc3RydWN0b3IoY3JlZGVudGlhbHMsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmNyZWRzID0gY3JlZGVudGlhbHM7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuICAgIC8vIFVzZWQgdG8gZmFjaWxpdGF0ZSB0ZXN0aW5nIG9mIHRoZSBjYWxsIHRvIHRoZSB1bmRlcmx5aW5nIG9iamVjdFxuICAgIHRoaXMuX3ZvbmFnZSA9IHRoaXMub3B0aW9ucy5uZXhtb092ZXJyaWRlIHx8IHZvbmFnZTtcblxuICAgIHRoaXMuX3ZvbmFnZS5pbml0aWFsaXplKFxuICAgICAgdGhpcy5jcmVkcy5hcGlLZXksXG4gICAgICB0aGlzLmNyZWRzLmFwaVNlY3JldCxcbiAgICAgIHRoaXMub3B0aW9uc1xuICAgICk7XG4gIH1cblxuICBzZW5kKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gICAgbGV0IHVzZUpXVCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLmNyZWRzLmFwcGxpY2F0aW9uSWQpIHtcbiAgICAgIHVzZUpXVCA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5hcGkucG9zdChNZXNzYWdlcy5QQVRILCBtZXNzYWdlLCBjYWxsYmFjaywgdXNlSldULCB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNZXNzYWdlcztcbiJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUFFQTs7OztBQUVBLE1BQU1BLFFBQU4sQ0FBZTtFQUNFLFdBQUpDLElBQUksR0FBRztJQUNoQixPQUFPLGNBQVA7RUFDRDs7RUFFREMsV0FBVyxDQUFDQyxXQUFELEVBQWNDLE9BQWQsRUFBdUI7SUFDaEMsS0FBS0MsS0FBTCxHQUFhRixXQUFiO0lBQ0EsS0FBS0MsT0FBTCxHQUFlQSxPQUFmLENBRmdDLENBSWhDOztJQUNBLEtBQUtFLE9BQUwsR0FBZSxLQUFLRixPQUFMLENBQWFHLGFBQWIsSUFBOEJDLGNBQTdDOztJQUVBLEtBQUtGLE9BQUwsQ0FBYUcsVUFBYixDQUNFLEtBQUtKLEtBQUwsQ0FBV0ssTUFEYixFQUVFLEtBQUtMLEtBQUwsQ0FBV00sU0FGYixFQUdFLEtBQUtQLE9BSFA7RUFLRDs7RUFFRFEsSUFBSSxDQUFDQyxPQUFELEVBQVVDLFFBQVYsRUFBb0I7SUFDdEIsSUFBSUMsTUFBTSxHQUFHLEtBQWI7O0lBQ0EsSUFBSSxLQUFLVixLQUFMLENBQVdXLGFBQWYsRUFBOEI7TUFDNUJELE1BQU0sR0FBRyxJQUFUO0lBQ0Q7O0lBRUQsT0FBTyxLQUFLWCxPQUFMLENBQWFhLEdBQWIsQ0FBaUJDLElBQWpCLENBQXNCbEIsUUFBUSxDQUFDQyxJQUEvQixFQUFxQ1ksT0FBckMsRUFBOENDLFFBQTlDLEVBQXdEQyxNQUF4RCxFQUFnRTtNQUNyRSxnQkFBZ0I7SUFEcUQsQ0FBaEUsQ0FBUDtFQUdEOztBQTVCWTs7ZUErQkFmLFEifQ==