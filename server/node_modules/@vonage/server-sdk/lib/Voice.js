"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _Utils = _interopRequireDefault(require("./Utils"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class Voice {
  static get ERROR_MESSAGES() {
    return {
      to: "Invalid to address",
      msg: "Invalid Text Message",
      maxDigits: "Invalid max digits for TTS prompt",
      byeText: "Invalid bye text for TTS prompt",
      pinCode: "Invalid pin code for TTS confirm",
      failedText: "Invalid failed text for TTS confirm",
      answerUrl: "Invalid answer URL for call"
    };
  }
  /**
   * @param {Credentials} credentials
   *    credentials to be used when interacting with the API.
   * @param {Object} options
   *    Addition  options.
   */


  constructor(credentials) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    this.creds = credentials;
    this.options = options;
  }

  _sendVoiceMessage(endpoint, data, callback) {
    if (!data.to) {
      _Utils.default.sendError(callback, new Error(Voice.ERROR_MESSAGES.to));
    } else {
      data["api_key"] = this.creds.apiKey;
      data["api_secret"] = this.creds.apiSecret;
      this.options.logger.info("sending TTS message to " + data.to + " with message " + data.text);
      this.options.httpClient.request({
        host: endpoint.host,
        path: _Utils.default.createPathWithQuery(endpoint.path, data)
      }, "POST", (err, apiResponse) => {
        if (!err && apiResponse.status && apiResponse.status > 0) {
          _Utils.default.sendError(callback, new Error(apiResponse["error-text"]), apiResponse);
        } else {
          if (callback) callback(err, apiResponse);
        }
      });
    }
  }
  /**
   * TODO: document
   */


  sendTTSMessage(recipient, message, opts, callback) {
    if (!message) {
      _Utils.default.sendError(callback, new Error(Voice.ERROR_MESSAGES.msg));
    } else {
      if (!opts) {
        opts = {};
      }

      opts["to"] = recipient;
      opts["text"] = message;

      this._sendVoiceMessage({
        host: this.options.apiHost || "api.nexmo.com",
        path: "/tts/json"
      }, opts, callback);
    }
  }
  /**
   * TODO: remove with next major version, API is 404
   */


  sendTTSPromptWithCapture(recipient, message, maxDigits, byeText, opts, callback) {
    if (!message) {
      _Utils.default.sendError(callback, new Error(Voice.ERROR_MESSAGES.msg));
    } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {
      _Utils.default.sendError(callback, new Error(Voice.ERROR_MESSAGES.maxDigits));
    } else if (!byeText) {
      _Utils.default.sendError(callback, new Error(Voice.ERROR_MESSAGES.byeText));
    } else {
      if (!opts) {
        opts = {};
      }

      opts["to"] = recipient;
      opts["text"] = message;
      opts["max_digits"] = maxDigits;
      opts["bye_text"] = byeText;

      this._sendVoiceMessage({
        host: this.options.apiHost || "api.nexmo.com",
        path: "/tts-prompt/json"
      }, opts, callback);
    }
  }
  /**
   * TODO: remove with next major version, API is 404
   */


  sendTTSPromptWithConfirm(recipient, message, maxDigits, pinCode, byeText, failedText, opts, callback) {
    if (!message) {
      _Utils.default.sendError(callback, new Error(Voice.ERROR_MESSAGES.msg));
    } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {
      _Utils.default.sendError(callback, new Error(Voice.ERROR_MESSAGES.maxDigits));
    } else if (!pinCode || pinCode.length !== maxDigits) {
      _Utils.default.sendError(callback, new Error(Voice.ERROR_MESSAGES.pinCode));
    } else if (!byeText) {
      _Utils.default.sendError(callback, new Error(Voice.ERROR_MESSAGES.byeText));
    } else if (!failedText) {
      _Utils.default.sendError(callback, new Error(Voice.ERROR_MESSAGES.failedText));
    } else {
      if (!opts) {
        opts = {};
      }

      opts["to"] = recipient;
      opts["text"] = message;
      opts["max_digits"] = maxDigits;
      opts["pin_code"] = pinCode;
      opts["bye_text"] = byeText;
      opts["failed_text"] = failedText;

      this._sendVoiceMessage({
        host: this.options.apiHost || "api.nexmo.com",
        path: "/tts-prompt/json"
      }, opts, callback);
    }
  }
  /**
   * TODO: remove with next major version, API is 404
   */


  call(recipient, answerUrl, opts, callback) {
    if (!answerUrl) {
      _Utils.default.sendError(callback, new Error(Voice.ERROR_MESSAGES.answerUrl));
    } else {
      if (!opts) {
        opts = {};
      }

      opts["to"] = recipient;
      opts["answer_url"] = answerUrl;

      this._sendVoiceMessage({
        host: this.options.restHost || "rest.nexmo.com",
        path: "/call/json"
      }, opts, callback);
    }
  }

}

var _default = Voice;
exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWb2ljZSIsIkVSUk9SX01FU1NBR0VTIiwidG8iLCJtc2ciLCJtYXhEaWdpdHMiLCJieWVUZXh0IiwicGluQ29kZSIsImZhaWxlZFRleHQiLCJhbnN3ZXJVcmwiLCJjb25zdHJ1Y3RvciIsImNyZWRlbnRpYWxzIiwib3B0aW9ucyIsImNyZWRzIiwiX3NlbmRWb2ljZU1lc3NhZ2UiLCJlbmRwb2ludCIsImRhdGEiLCJjYWxsYmFjayIsIlV0aWxzIiwic2VuZEVycm9yIiwiRXJyb3IiLCJhcGlLZXkiLCJhcGlTZWNyZXQiLCJsb2dnZXIiLCJpbmZvIiwidGV4dCIsImh0dHBDbGllbnQiLCJyZXF1ZXN0IiwiaG9zdCIsInBhdGgiLCJjcmVhdGVQYXRoV2l0aFF1ZXJ5IiwiZXJyIiwiYXBpUmVzcG9uc2UiLCJzdGF0dXMiLCJzZW5kVFRTTWVzc2FnZSIsInJlY2lwaWVudCIsIm1lc3NhZ2UiLCJvcHRzIiwiYXBpSG9zdCIsInNlbmRUVFNQcm9tcHRXaXRoQ2FwdHVyZSIsImlzTmFOIiwibGVuZ3RoIiwic2VuZFRUU1Byb21wdFdpdGhDb25maXJtIiwiY2FsbCIsInJlc3RIb3N0Il0sInNvdXJjZXMiOlsiLi4vc3JjL1ZvaWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4vVXRpbHNcIjtcblxuY2xhc3MgVm9pY2Uge1xuICBzdGF0aWMgZ2V0IEVSUk9SX01FU1NBR0VTKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0bzogXCJJbnZhbGlkIHRvIGFkZHJlc3NcIixcbiAgICAgIG1zZzogXCJJbnZhbGlkIFRleHQgTWVzc2FnZVwiLFxuICAgICAgbWF4RGlnaXRzOiBcIkludmFsaWQgbWF4IGRpZ2l0cyBmb3IgVFRTIHByb21wdFwiLFxuICAgICAgYnllVGV4dDogXCJJbnZhbGlkIGJ5ZSB0ZXh0IGZvciBUVFMgcHJvbXB0XCIsXG4gICAgICBwaW5Db2RlOiBcIkludmFsaWQgcGluIGNvZGUgZm9yIFRUUyBjb25maXJtXCIsXG4gICAgICBmYWlsZWRUZXh0OiBcIkludmFsaWQgZmFpbGVkIHRleHQgZm9yIFRUUyBjb25maXJtXCIsXG4gICAgICBhbnN3ZXJVcmw6IFwiSW52YWxpZCBhbnN3ZXIgVVJMIGZvciBjYWxsXCIsXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtDcmVkZW50aWFsc30gY3JlZGVudGlhbHNcbiAgICogICAgY3JlZGVudGlhbHMgdG8gYmUgdXNlZCB3aGVuIGludGVyYWN0aW5nIHdpdGggdGhlIEFQSS5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogICAgQWRkaXRpb24gIG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihjcmVkZW50aWFscywgb3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5jcmVkcyA9IGNyZWRlbnRpYWxzO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICBfc2VuZFZvaWNlTWVzc2FnZShlbmRwb2ludCwgZGF0YSwgY2FsbGJhY2spIHtcbiAgICBpZiAoIWRhdGEudG8pIHtcbiAgICAgIFV0aWxzLnNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKFZvaWNlLkVSUk9SX01FU1NBR0VTLnRvKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGFbXCJhcGlfa2V5XCJdID0gdGhpcy5jcmVkcy5hcGlLZXk7XG4gICAgICBkYXRhW1wiYXBpX3NlY3JldFwiXSA9IHRoaXMuY3JlZHMuYXBpU2VjcmV0O1xuICAgICAgdGhpcy5vcHRpb25zLmxvZ2dlci5pbmZvKFxuICAgICAgICBcInNlbmRpbmcgVFRTIG1lc3NhZ2UgdG8gXCIgKyBkYXRhLnRvICsgXCIgd2l0aCBtZXNzYWdlIFwiICsgZGF0YS50ZXh0XG4gICAgICApO1xuICAgICAgdGhpcy5vcHRpb25zLmh0dHBDbGllbnQucmVxdWVzdChcbiAgICAgICAge1xuICAgICAgICAgIGhvc3Q6IGVuZHBvaW50Lmhvc3QsXG4gICAgICAgICAgcGF0aDogVXRpbHMuY3JlYXRlUGF0aFdpdGhRdWVyeShlbmRwb2ludC5wYXRoLCBkYXRhKSxcbiAgICAgICAgfSxcbiAgICAgICAgXCJQT1NUXCIsXG4gICAgICAgIChlcnIsIGFwaVJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgaWYgKCFlcnIgJiYgYXBpUmVzcG9uc2Uuc3RhdHVzICYmIGFwaVJlc3BvbnNlLnN0YXR1cyA+IDApIHtcbiAgICAgICAgICAgIFV0aWxzLnNlbmRFcnJvcihcbiAgICAgICAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgICAgICAgIG5ldyBFcnJvcihhcGlSZXNwb25zZVtcImVycm9yLXRleHRcIl0pLFxuICAgICAgICAgICAgICBhcGlSZXNwb25zZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhlcnIsIGFwaVJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRPRE86IGRvY3VtZW50XG4gICAqL1xuICBzZW5kVFRTTWVzc2FnZShyZWNpcGllbnQsIG1lc3NhZ2UsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICBVdGlscy5zZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihWb2ljZS5FUlJPUl9NRVNTQUdFUy5tc2cpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFvcHRzKSB7XG4gICAgICAgIG9wdHMgPSB7fTtcbiAgICAgIH1cbiAgICAgIG9wdHNbXCJ0b1wiXSA9IHJlY2lwaWVudDtcbiAgICAgIG9wdHNbXCJ0ZXh0XCJdID0gbWVzc2FnZTtcbiAgICAgIHRoaXMuX3NlbmRWb2ljZU1lc3NhZ2UoXG4gICAgICAgIHtcbiAgICAgICAgICBob3N0OiB0aGlzLm9wdGlvbnMuYXBpSG9zdCB8fCBcImFwaS5uZXhtby5jb21cIixcbiAgICAgICAgICBwYXRoOiBcIi90dHMvanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBvcHRzLFxuICAgICAgICBjYWxsYmFja1xuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVE9ETzogcmVtb3ZlIHdpdGggbmV4dCBtYWpvciB2ZXJzaW9uLCBBUEkgaXMgNDA0XG4gICAqL1xuICBzZW5kVFRTUHJvbXB0V2l0aENhcHR1cmUoXG4gICAgcmVjaXBpZW50LFxuICAgIG1lc3NhZ2UsXG4gICAgbWF4RGlnaXRzLFxuICAgIGJ5ZVRleHQsXG4gICAgb3B0cyxcbiAgICBjYWxsYmFja1xuICApIHtcbiAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgIFV0aWxzLnNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKFZvaWNlLkVSUk9SX01FU1NBR0VTLm1zZykpO1xuICAgIH0gZWxzZSBpZiAoIW1heERpZ2l0cyB8fCBpc05hTihtYXhEaWdpdHMpIHx8IG1heERpZ2l0cy5sZW5ndGggPiAxNikge1xuICAgICAgVXRpbHMuc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoVm9pY2UuRVJST1JfTUVTU0FHRVMubWF4RGlnaXRzKSk7XG4gICAgfSBlbHNlIGlmICghYnllVGV4dCkge1xuICAgICAgVXRpbHMuc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoVm9pY2UuRVJST1JfTUVTU0FHRVMuYnllVGV4dCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIW9wdHMpIHtcbiAgICAgICAgb3B0cyA9IHt9O1xuICAgICAgfVxuICAgICAgb3B0c1tcInRvXCJdID0gcmVjaXBpZW50O1xuICAgICAgb3B0c1tcInRleHRcIl0gPSBtZXNzYWdlO1xuICAgICAgb3B0c1tcIm1heF9kaWdpdHNcIl0gPSBtYXhEaWdpdHM7XG4gICAgICBvcHRzW1wiYnllX3RleHRcIl0gPSBieWVUZXh0O1xuICAgICAgdGhpcy5fc2VuZFZvaWNlTWVzc2FnZShcbiAgICAgICAge1xuICAgICAgICAgIGhvc3Q6IHRoaXMub3B0aW9ucy5hcGlIb3N0IHx8IFwiYXBpLm5leG1vLmNvbVwiLFxuICAgICAgICAgIHBhdGg6IFwiL3R0cy1wcm9tcHQvanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBvcHRzLFxuICAgICAgICBjYWxsYmFja1xuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVE9ETzogcmVtb3ZlIHdpdGggbmV4dCBtYWpvciB2ZXJzaW9uLCBBUEkgaXMgNDA0XG4gICAqL1xuICBzZW5kVFRTUHJvbXB0V2l0aENvbmZpcm0oXG4gICAgcmVjaXBpZW50LFxuICAgIG1lc3NhZ2UsXG4gICAgbWF4RGlnaXRzLFxuICAgIHBpbkNvZGUsXG4gICAgYnllVGV4dCxcbiAgICBmYWlsZWRUZXh0LFxuICAgIG9wdHMsXG4gICAgY2FsbGJhY2tcbiAgKSB7XG4gICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICBVdGlscy5zZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihWb2ljZS5FUlJPUl9NRVNTQUdFUy5tc2cpKTtcbiAgICB9IGVsc2UgaWYgKCFtYXhEaWdpdHMgfHwgaXNOYU4obWF4RGlnaXRzKSB8fCBtYXhEaWdpdHMubGVuZ3RoID4gMTYpIHtcbiAgICAgIFV0aWxzLnNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKFZvaWNlLkVSUk9SX01FU1NBR0VTLm1heERpZ2l0cykpO1xuICAgIH0gZWxzZSBpZiAoIXBpbkNvZGUgfHwgcGluQ29kZS5sZW5ndGggIT09IG1heERpZ2l0cykge1xuICAgICAgVXRpbHMuc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoVm9pY2UuRVJST1JfTUVTU0FHRVMucGluQ29kZSkpO1xuICAgIH0gZWxzZSBpZiAoIWJ5ZVRleHQpIHtcbiAgICAgIFV0aWxzLnNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKFZvaWNlLkVSUk9SX01FU1NBR0VTLmJ5ZVRleHQpKTtcbiAgICB9IGVsc2UgaWYgKCFmYWlsZWRUZXh0KSB7XG4gICAgICBVdGlscy5zZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihWb2ljZS5FUlJPUl9NRVNTQUdFUy5mYWlsZWRUZXh0KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghb3B0cykge1xuICAgICAgICBvcHRzID0ge307XG4gICAgICB9XG4gICAgICBvcHRzW1widG9cIl0gPSByZWNpcGllbnQ7XG4gICAgICBvcHRzW1widGV4dFwiXSA9IG1lc3NhZ2U7XG4gICAgICBvcHRzW1wibWF4X2RpZ2l0c1wiXSA9IG1heERpZ2l0cztcbiAgICAgIG9wdHNbXCJwaW5fY29kZVwiXSA9IHBpbkNvZGU7XG4gICAgICBvcHRzW1wiYnllX3RleHRcIl0gPSBieWVUZXh0O1xuICAgICAgb3B0c1tcImZhaWxlZF90ZXh0XCJdID0gZmFpbGVkVGV4dDtcbiAgICAgIHRoaXMuX3NlbmRWb2ljZU1lc3NhZ2UoXG4gICAgICAgIHtcbiAgICAgICAgICBob3N0OiB0aGlzLm9wdGlvbnMuYXBpSG9zdCB8fCBcImFwaS5uZXhtby5jb21cIixcbiAgICAgICAgICBwYXRoOiBcIi90dHMtcHJvbXB0L2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgb3B0cyxcbiAgICAgICAgY2FsbGJhY2tcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRPRE86IHJlbW92ZSB3aXRoIG5leHQgbWFqb3IgdmVyc2lvbiwgQVBJIGlzIDQwNFxuICAgKi9cbiAgY2FsbChyZWNpcGllbnQsIGFuc3dlclVybCwgb3B0cywgY2FsbGJhY2spIHtcbiAgICBpZiAoIWFuc3dlclVybCkge1xuICAgICAgVXRpbHMuc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoVm9pY2UuRVJST1JfTUVTU0FHRVMuYW5zd2VyVXJsKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghb3B0cykge1xuICAgICAgICBvcHRzID0ge307XG4gICAgICB9XG4gICAgICBvcHRzW1widG9cIl0gPSByZWNpcGllbnQ7XG4gICAgICBvcHRzW1wiYW5zd2VyX3VybFwiXSA9IGFuc3dlclVybDtcbiAgICAgIHRoaXMuX3NlbmRWb2ljZU1lc3NhZ2UoXG4gICAgICAgIHtcbiAgICAgICAgICBob3N0OiB0aGlzLm9wdGlvbnMucmVzdEhvc3QgfHwgXCJyZXN0Lm5leG1vLmNvbVwiLFxuICAgICAgICAgIHBhdGg6IFwiL2NhbGwvanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBvcHRzLFxuICAgICAgICBjYWxsYmFja1xuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVm9pY2U7XG4iXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FBRUE7Ozs7QUFFQSxNQUFNQSxLQUFOLENBQVk7RUFDZSxXQUFkQyxjQUFjLEdBQUc7SUFDMUIsT0FBTztNQUNMQyxFQUFFLEVBQUUsb0JBREM7TUFFTEMsR0FBRyxFQUFFLHNCQUZBO01BR0xDLFNBQVMsRUFBRSxtQ0FITjtNQUlMQyxPQUFPLEVBQUUsaUNBSko7TUFLTEMsT0FBTyxFQUFFLGtDQUxKO01BTUxDLFVBQVUsRUFBRSxxQ0FOUDtNQU9MQyxTQUFTLEVBQUU7SUFQTixDQUFQO0VBU0Q7RUFDRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztFQUNFQyxXQUFXLENBQUNDLFdBQUQsRUFBNEI7SUFBQSxJQUFkQyxPQUFjLHVFQUFKLEVBQUk7SUFDckMsS0FBS0MsS0FBTCxHQUFhRixXQUFiO0lBQ0EsS0FBS0MsT0FBTCxHQUFlQSxPQUFmO0VBQ0Q7O0VBRURFLGlCQUFpQixDQUFDQyxRQUFELEVBQVdDLElBQVgsRUFBaUJDLFFBQWpCLEVBQTJCO0lBQzFDLElBQUksQ0FBQ0QsSUFBSSxDQUFDYixFQUFWLEVBQWM7TUFDWmUsY0FBQSxDQUFNQyxTQUFOLENBQWdCRixRQUFoQixFQUEwQixJQUFJRyxLQUFKLENBQVVuQixLQUFLLENBQUNDLGNBQU4sQ0FBcUJDLEVBQS9CLENBQTFCO0lBQ0QsQ0FGRCxNQUVPO01BQ0xhLElBQUksQ0FBQyxTQUFELENBQUosR0FBa0IsS0FBS0gsS0FBTCxDQUFXUSxNQUE3QjtNQUNBTCxJQUFJLENBQUMsWUFBRCxD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